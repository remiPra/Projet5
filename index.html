<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <!-- polices -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">

    <!-- integration de la librairie axios -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.0/dist/aos.css">
    <script src="https://unpkg.com/aos@2.3.0/dist/aos.js"></script>
    <!-- bootstrap -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <!-- integration de vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!-- integration de font-awesome -->
    <script src="https://kit.fontawesome.com/5a70a7892a.js"></script>
    <title>Ma ferme Bio</title>
</head>

<body>
    <div id="app">
        <template>
        <!-- section de l'header comprenant le logo et menu -->
        <header class="d-flex fixed-top justify-content-between">
            <a id="logo" class="pl-4 ">
                Ma Ferme bio
            </a>
            <nav class="d-flex navbar navbar-light pr-2">
                <div id="navLargeScreen">
                    <ul class="navbar-nav d-flex flex-row">
                        <li class="nav-items">
                            <a class="nav-link" href="index.html">Accueil</a>
                        </li>
                        <li class="nav-items">
                            <a class="nav-link" href="contact.html">Contact</a>
                        </li>
                        <li class="nav-items">
                            <a class="nav-link" href="sommaireArticle.html">Actualités</a>
                        </li>
                        <li class="nav-items">
                            <a class="nav-link" href="connexion.html">Connexion</a>
                        </li>
                        <li class="nav-items">
                            <a class="nav-link" href="administrationConnexion.html">Administration</a>
                        </li>
                    </ul>
                </div>
                <div id="togglecontainer">
                    <button class="navbar-toggler navbar-light toggleMenu" type="button" data-toggle="collapse"
                        data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                        <span class="navbar-toggler-icon text-light"></span>
                    </button>
                    <div id="collapseExample" class="collapse">
                        <div>

                            <a class="nav-link" href="index.html">Accueil</a>

                            <a class="nav-link" href="contact.html">Contact</a>

                            <a class="nav-link" href="sommaireArticle.html">Actualités</a>

                            <a class="nav-link" href="connexion.html">Connexion</a>

                            <a class="nav-link" href="administrationConnexion.html">Administration</a>

                        </div>
                    </div>
                </div>
                <div>
                    <button id="btnCart" @click="modal()">
                        <i class="fas fa-shopping-cart">{{numbersOfproducts}}</i>
                    </button>
                </div>
            </nav>
        </header>
        <div v-if="main">
        <!-- section principale de presentation du shop -->
        <section id="main">
            <picture id="imageParrallax">
                <source srcset="assets/images/basket-for-apple-picking-in-fruit-orchard.mobile.jpg"
                    media="(max-width: 480px)">
                <source srcset="assets/images/basket-for-apple-picking-in-fruit-orchard.Ipad.jpg"
                    media="(max-width: 700px)">
                <img src="assets/images/basket-for-apple-picking-in-fruit-orchard.jpg"
                    alt="panier en osier se situant sur la gauche dans un champ vert ">
            </picture>
            <div id="containerMain" class="row">
                <main-container></main-container>
                <slider-news></slider-news>
            </div>
        </section>
        <!-- section de la partie slider pour la version mobile -->
        <section>
            <slider-new-mobile></slider-new-mobile>
        </section>
        <!-- section de la partie des infos du magasin -->
        <section class="row">
           <text-shop></text-shop>
        </section>
        <!-- separation -->
        <section class="separation">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
                <path fill="#26802e" fill-opacity="1"
                    d="M0,224L48,240C96,256,192,288,288,261.3C384,235,480,149,576,112C672,75,768,85,864,101.3C960,117,1056,139,1152,138.7C1248,139,1344,117,1392,106.7L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z">
                </path>
            </svg>
        </section>
        <!-- section de la partie de la categorie des produits -->
        <section id="products">
            <shop-products></shop-products>
        </section>
        <!-- details des différents produits -->
        <section id="productsList">
            <shop-products-details :elements="products" @onaddcart="addCart"></shop-products-details>
        </section>
        </div>
        <transition name="fade">
        <section id="overlay" v-if="showModal">
            <div >
                <button id="closeModal" @click="closeModal">fermer</button>
            </div>
            <cart-product :carts="carts" :showModal="showModal" @onaddcart="addCart" @onsubstractcart="substractCart"></cart-product>
        </section>
        </transition>
            


        <footer>
            <div class="row introduction">
                <div class="col-md-4">
                    <h3 class="text-center ">Contactez-Nous</h3>
                    <div>
                        <div>
                            <div>
                                <i class="fas fa-home"></i>
                            </div>
                            <p>
                                La ferme Bio <br>

                                17 rue Alphonse Daudet <br>
                                82100 OOOOO
                            </p>
                        </div>
                        <i class="fas fa-phone"></i>
                    </div>
                    <p>
                        00000000000
                    </p>
                    <div>
                        <i class="fas fa-phone"></i>
                    </div>
                    <p>
                        xxxxxxxxx@gmail.com
                    </p>

                </div>
                <div class="col-md-4">
                    <h3>Horaires d'ouverture</h3>
                    <div>
                        <ul>
                            <li>Lundi: 9h à 18h </li>
                            <li>Mardi: 9h à 18h</li>
                            <li>Mercredi: 9h à 18h</li>
                            <li>Jeudi: 9h à 18h</li>
                            <li>Vendredi: 9h à 18h</li>
                            <li>Samedi: 9h à 18h</li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-4">
                    <h3>Réseaux Sociaux</h3>
                    <div>
                        <a href=""><i class="fab fa-facebook"></i></a>
                        <a href=""><i class="fab fa-instagram"></i></a>
                        <a href=""><i class="fab fa-pinterest"></i></a>
                    </div>
                </div>


            </div>
        </footer>
    
    </template>
    </div>
    <script>
        // etablissement de composant local
        // vue composant du header
        Vue.component('main-container', {
            data() {
                return {
                    header: {
                        h1: "Bienvenue chez ma ferme Bio",
                        h2: "Votre magasin de fruits et legumes avec la possibilité de commander en ligne",
                        
                    },
                }
            },
            template: `
            <div class="col-sm-6 container text-center" id="presentationShop">
                <div class="container px-md-3 shopTitle">
                    <h1 class="text-light">{{header.h1}}</h1>
                    <h2>{{header.h2}} </h2>
                    
                    <button>Commencez vos courses</button>
                </div>
            </div>`
        })
        // vue composant des infos de slider 
        Vue.component('slider-news', {
            data() {
                return {
                    liveSlide: 0,
                    marginLeft: "",
                    slides: [
                        {
                            title: "Promotion de 50%",
                            paragraphe: "du lundi 30 Janvier au samedi 27 Janvier , nous vous proposons un grand stock de cerises a 50%"
                        },
                        { title: "title2", paragraphe: "title2" },
                        { title: "title3", paragraphe: "title2" },
                        { title: "title4", paragraphe: "title2" },
                    ]
                }
            },
            template: `<div class="col-sm-6" id="sliderNews">
                <div class="carroussel">
                    <div class="carrousselcontainer" :style="{marginLeft : marginLeft}">
                        <div class="slideNews" v-for="slide in slides">
                            <h3>{{slide.title}}</h3>
                            <p>{{slide.paragraphe}}</p>

                        </div>
                    </div>
                </div>
                <div class="buttoncontainer">
                    <button v-on:click="previous()"><i class="fas fa-chevron-circle-left"></i>News</button>
                    <button v-on:click="next()"><i class="fas fa-chevron-circle-right"></i>News</button>
                </div>
            </div>`,
            methods: {
                next() {
                    if (this.liveSlide === 3) {
                        this.liveSlide = 0
                    } else { this.liveSlide++; }
                    console.log(this.liveSlide);

                    this.marginLeft = - this.liveSlide * 300 + "px";
                },
                previous() {
                    if (this.liveSlide === 0) {
                        this.liveSlide = this.slides.length - 1
                    } else { this.liveSlide--; }
                    console.log(this.liveSlide);

                    this.marginLeft = - this.liveSlide * 300 + "px";
                }
            },
            computed: {
                slideLength: function () {
                    return this.slides.length
                }
            },
        })
        // vue composant pour l version mobile
        Vue.component('slider-new-mobile', {
            data() {
                return {
                    liveSlide: 0,
                    marginLeft: "",
                    slides: [
                        {
                            title: "Promotion de 50%",
                            paragraphe: "du lundi 30 Janvier au samedi 27 Janvier , nous vous proposons un grand stock de cerises a 50%"
                        },
                        { title: "title2", paragraphe: "title2" },
                        { title: "title3", paragraphe: "title2" },
                        { title: "title4", paragraphe: "title2" },
                    ]
                }
            },
            template: `
            <div class="col-md-6" id="sliderNewsMobile">
                <div class="carroussel">
                    <div class="carrousselcontainer" :style="{marginLeft : marginLeft}">
                        <div class="slideNews" v-for="slide in slides">
                            <h3>{{slide.title}}</h3>
                            <p>{{slide.paragraphe}}</p>
                        </div>
                    </div>
                </div>
                <div class="buttoncontainer">
                    <button v-on:click="previous()"><i class="fas fa-chevron-circle-left"></i>News</button>
                    <button v-on:click="next()"><i class="fas fa-chevron-circle-right"></i>News</button>
                </div>
            </div>`,
            methods: {
                next() {
                    if (this.liveSlide === 3) {
                        this.liveSlide = 0
                    } else { this.liveSlide++; }
                    console.log(this.liveSlide);

                    this.marginLeft = - this.liveSlide * 300 + "px";
                },
                previous() {
                    if (this.liveSlide === 0) {
                        this.liveSlide = this.slides.length - 1
                    } else { this.liveSlide--; }
                    console.log(this.liveSlide);

                    this.marginLeft = - this.liveSlide * 300 + "px";
                }
            },
            computed: {
                slideLength: function () {
                    return this.slides.length
                }
            },

        })

        // vue composant de la presentation du site 
        Vue.component('text-shop', {
            data() {
                return {
                    h2: "Ma ferme bio : un magasin a votre service",
                    IntroTextShop: "Ma ferme bio vous propose un nouveau service pour faciliter vos courses : le Click and Collect",
                    goals: [
                        {
                            h3: "Choisissez tranquillement vos articles de votre magasin sur le site !!",
                            icon: "fas fa-carrot"
                        },
                        {
                            h3: "Acheter vos produits directement en ligne",
                            icon: "fas fa-apple-alt"
                        },
                        {
                            h3: `Vous avez ensuite deux possibilités :
                                    soit cherchez votre commande en magasin ou soit vous faire livrer `,
                            icon: "fas fa-lemon"
                        },
                    ]
                }
            },
            template: `
        <div id="textShop" >
            <div class="introduction col-lg-8 col-xm-10 text-center m-auto">
                <h2 class="p-2">{{h2}}</h2>
                <p>{{IntroTextShop}}</p>
            </div>
            <div class="d-flex flex-wrap container-fluid">
                <div id="goals" class="col-md-7 m-auto">
                    <div id="goalContainer">
                        <div v-for="text in goals" class="d-flex goalsItems">
                            <i :class="text.icon"></i><h3>{{text.h3}}</h3>
                        </div>
                    </div>    
                </div>
                <div class="col-md-5">
                    <!-- mise en place du carroussel de news -->
                    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img class="d-block w-100"
                                    src="./assets/images/sliderBoutique/a-man-stands-at-the-counter-of-a-coffee-shop.jpg"
                                    alt="un homme qui se tient derrier le cointoir d'une boutique">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="./assets/images/sliderBoutique/a-woman-in-her-shop.jpg"
                                    alt="une vedeuse se tenant de debout a la caisse">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="./assets/images/sliderBoutique/products-are-paid.jpg"
                                    alt="transaction dans un magasin entre le client et la vendeuse">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
            </div>
            </div> 
            `,
        })

        // vue composant par catégories 
        Vue.component('shop-products', {
            data() {
                return {
                    h2: "Faites vos courses en ligne",
                    IntroTextShop: "Ajouter le type de produits que vous désirez et vous déciderez ensuite en cliquant sur le petit panier en haut à droite la quantité désirez",
                    goals: [
                        {
                            h3: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do",
                            icon: ""
                        },
                        {
                            h3: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do",
                            icon: ""
                        },
                        {
                            h3: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do",
                            icon: ""
                        },
                    ]
                }
            },
            template: `
    <div>
        <div class="introduction col-lg-8 col-xm-10 text-center m-auto">
            <h2 class="p-2">{{h2}}</h2>
            <p>{{IntroTextShop}}</p>
        </div>
        <div class="col-lg-10 col-md-12 m-auto categoryContainer row">

            <div class="box">
                <div class="imgBx">
                    <img src="assets/images/category/fresh-vegetables-flatlay.jpg">
                </div>
                <div class="content">
                    <h2>Title</h2>
                    <p class="cardColor">Cliquez ici</p>
                    <p class="contentShow">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                        tempor incididunt ut labore et dolore magna aliqua.</p>
                    <button href="#">Read More</button>
                    
                </div>
            </div>
            <div class="box">
                <div class="imgBx">
                    <img src="assets/images/category/vertical-citrus-fruit-pile.jpg">
                </div>
                <div class="content">
                    <h2>Title</h2>
                    <p class="cardColor">Cliquez ici</p>
                    <p class="contentShow">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                        tempor incididunt ut labore et dolore magna aliqua.</p>
                    <button href="#">Read More</button>
                </div>
            </div>



            <div class="box">
                <div class="imgBx">
                    <img src="assets/images/category/lemonade-on-white-woodgrain-table.jpg">
                </div>
                <div class="content">
                    <h2>Title</h2>
                    <p class="cardColor">Cliquez ici</p>
                    <p class="contentShow">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                        tempor incididunt ut labore et dolore magna aliqua.</p>
                    <button href="#">Read More</button>
                </div>
            </div>


        </div>
    </div>`        })

        
         // vue composant des differents produits 
        Vue.component('shop-products-details', {
            props: {
                elements: {
                    type: Array
                }
            },
            data() {
                return {
                    h2: "Nos légumes",
                    text: "Retouvez la selection de nos plus beaux légumes disponible dans notre magasin",
                    searchProduct: "",
                    productsListShow: true,
                    liveSlideProduct:0                    
                   
                    }
            },
            template: `
        <div>
        <div class="introduction col-lg-8 col-xm-10 text-center m-auto">
            <h2 class="p-2">{{h2}}</h2>
            <h3>{{text}}</h3>
            <p>{{elements[liveSlideProduct].title}}</p>
            <input class="col-lg-8 m-auto" type="text" v-model="searchProduct" @keyup="search">
        </div>
        <div class="justify-content-flex-start flex-wrap categoryContainer productListGrid">
            <div class="ProductImage text-center box" v-for="(product,index) in elements" :key="product.name"
                :id="product.title">
                <div class="imgBx">
                    <img :src="product.src">
                </div>
                <div class="content">
                    <h3>{{product.title}}</h3>
                    <p class="contentShow">Lorem{{index}} ipsum dolor sit amet, consectetur adipisicing elit, .</p>
                    <button @click="onAddCart(product)" id="buttonAdd">ajouter</button>
                    <p class="cardColor">Cliquez pour ajouter</p>
                    <p id="messageShowAddProduct">{{product.title}} ajouté</p>
                </div>
            </div>
        </div>
        <div class="justify-content-flex-start flex-wrap categoryContainer cartSlider"> 
            
            <div id="previousProduct">
                <button @click="previousProduct"><i class="fas fa-chevron-circle-left"></i> </button>
            </div>

            <div class="ProductImage text-center box" :id="elements[liveSlideProduct].title">
                <div class="imgBx">
                    <img :src="elements[liveSlideProduct].src">
                </div>
                <div class="content">
                    <h3>{{elements[liveSlideProduct].title}}</h3>
                    <p class="contentShow">Lorem ipsum dolor sit amet, consectetur adipisicing elit, .</p>
                    <button @click="onAddCart(elements[liveSlideProduct])" id="buttonAdd">ajouter</button>
                    <p class="cardColor">Cliquez pour ajouter</p>
                    <p id="messageShowAddProduct">{{elements[liveSlideProduct].title}} ajouté</p>
                </div>
            </div>
              
          
            <div id="nextProduct">
                <button @click="nextProduct"><i class="fas fa-chevron-circle-right"></i></button>
            </div>
        </div>   
            
        </div>
        </div>`,
            methods: {
                search() {
                    let sentence = [];
                    // on cré un tableau avec tous les noms des produits
                    let products = this.elements;
                    products.forEach(element => {
                        sentence.push(element.title)
                    });
                    console.log(sentence);
                    let Word = this.searchProduct
                    //passage en minuscule
                    let word = Word.toLowerCase()
                    sentence.forEach(element => {
                        // si la chaine inclut un des mots
                        if (element.includes(word)) {
                            console.log(sentence.indexOf(element))
                            document.getElementById(element).style.display = "block";
                            this.liveSlideProduct = sentence.indexOf(element);
                            console.log(this.liveSlideProduct)
                            console.log("succes")
                        } else {
                            document.getElementById(element).style.display = "none";
                            console.log("alert")
                        }
                    })
                },
                onAddCart(product) {
                    //document.getElementById('messageShowAddProduct').style.animation = "showMessage 4s"
                    this.$emit("onaddcart", product);
                    console.log(product)
                },
                nextProduct(){
                    if(this.liveSlideProduct == this.elements.length -1){
                        this.liveSlideProduct = 0
                    } else{
                    this.liveSlideProduct++}
                },
                previousProduct(){
                    if(this.liveSlideProduct == 0){
                        this.liveSlideProduct = this.elements.length - 1
                    } else{
                    this.liveSlideProduct--};
                    console.log(this.liveSlideProduct)
                }
            }
        })

     
        Vue.component('cart-product', {
            template:
         `
    <div>     
        <div>
            <div class="form-group">
                <h3>Votre Panier </h3>
            </div>
        </div>
        <form id="cart" class="col-md-8 text-light"  method="POST">
        <div>
            <div class="form-group">
                <h3>Votre Panier </h3>
            </div>
        </div>
            <template v-if='this.carts==""''>
            <div class="d-flex" >
                <div id="formCart" class="form-group">
                Vous n'avez pas d'articles dans votre panier
                </div>
            </div>    
            </template>
        <div id="containerCart">
        <div class="form-group" v-for="(cart,index) in carts">
            <div class="row align-items-center" >
                <div id="formCart" class="form-group col-md-3">
                    <label for="productQuantity">
                    
                    <button type="button" @click="onAddCart(cart)">+</button>
                    <input type="text" :value="cart.quantity" name="productQuantity" id="productQuantity">
                    <button type="button" @click="onSubstractQuantity(cart)">-</button>
                </label>
                </div>
                <div class="form-group col-md-6">
                    <label for="productName">
                    <input type="text" :value="cart.title"  name="productName" id="productName">
                    </label>
                </div>
                <div class="form-group col-md-3">
                    <label for="priceProduct">
                    <input type="text" :value="cart.totalPriceProduct"  name="totalPriceProduct" id="totalPriceProduct">
                    </label>
                </div>

            </div>    
        </div>    
        </div>
        <div class="form-group">
            <input class="formButton" @click="confirmationShow" type="button" value="Passez la commande" name="btnContact">
        </div>
        <div id="confirmationModal" v-if="confirmationModal">
            <div class="form-group">
                <h3>Voulez vous confirmez votre choix?</h3>
                <button>Oui</button>  
                <button @click="confirmationModal=false">Non</button>  
            </div>
        </div>
        </form>
    </div>
    `,
            props: ['carts'],
            data() {
                return {
                    confirmationModal: false
                }
            },
            methods:{
                onAddCart(cart){
                    console.log(cart);
                    this.$emit('onaddcart',cart)
                },
                onSubstractQuantity(cart){
                    this.$emit('onsubstractcart',cart)
                },
                confirmationShow(){
                    this.confirmationModal = true;
                    console.log(this.confirmationModal)
                }
            }
        })

        




        // vue principale 
        new Vue({
            el: "#app",
            data: {
                main:true,
                //confirmation du cart
                
                showModal:false,
                duplicateCart: false,
                products: [
                    {
                        title: "abricot",
                        src: "./assets/images/fruitsEtLegumes/abricotFormat.png",
                        quantity: 1,
                        price:32,
                        totalPriceProduct:32
                    },
                    {
                        title: "prune",
                        src: "./assets/images/fruitsEtLegumes/pruneFormat.png",
                        quantity: 1,
                        price:32,
                        totalPriceProduct:32
                    },
                    {
                        title: "melon",
                        src: "./assets/images/fruitsEtLegumes/melonFormat.png",
                        quantity: 1,
                        price:32,
                        totalPriceProduct:32

                    },
                    {
                        title: "cerise",
                        src: "./assets/images/fruitsEtLegumes/ceriseFormat.png",
                        quantity: 1,
                        price:32,
                        totalPriceProduct:32

                    },
                    {
                        title: "haricots",
                        src: "./assets/images/fruitsEtLegumes/haricotsFormat.png",
                        quantity: 1,
                        price:32,
                        totalPriceProduct:32

                    },
                    {
                        title: "framboise",
                        src: "./assets/images/fruitsEtLegumes/framboiseFormat.png",
                        quantity: 1,
                        price:32,
                        totalPriceProduct:32

                    },
                    {
                        title: "aubergine",
                        src: "./assets/images/fruitsEtLegumes/aubergineFormat.png",
                        quantity: 1,
                        price:32,
                        totalPriceProduct:32

                    },
                    {
                        title: "peche",
                        src: "./assets/images/fruitsEtLegumes/pecheFormat.png",
                        quantity: 1,
                        price:32,
                        totalPriceProduct:32

                    }
                ],
                carts: [],
                quantityCart: ""
            },
            methods: {
                addCart(cart) {
                    //verification si le produit existe deja
                    this.carts.forEach(element => {
                        if (element.title == cart.title) {
                            element.quantity++;
                            element.totalPriceProduct = element.quantity * element.price 
                            this.duplicateCart = true
                        }
                    })
                    //si il est deja present on ne le rajoute pas
                    if (!this.duplicateCart) {
                        this.carts.push(cart)
                    }
                    console.log(this.carts);
                    //on reinitialise le dupliateCart en false
                    this.duplicateCart = false;
                },
                substractCart(cart){
                    // verification que le produit est present
                    this.carts.forEach(element => {
                        if (element.title == cart.title) {
                            element.quantity--;
                            //si quantity 0
                            if(element.quantity == 0){
                                const deleteCart = this.carts.indexOf(element);
                                this.carts.splice(deleteCart,1);
                                console.log(this.carts);
                                return;
                            }
                            element.totalPriceProduct = element.quantity * element.price 
                        }
                    })
                },
                modal(){
                    this.main=false;
                    this.showModal = true;
                    console.log("true");
                    window.scrollTo(0, 0);
                },
                closeModal(){
                    this.showModal = false;
                    this.main=true;
                    console.log(this.showModal)
                },
                
            },
            computed: {
                numbersOfproducts() {
                    if (this.carts == null) return 0;
                    const numberArticles = this.carts.reduce((acc, curr) => {
                        return acc + curr.quantity;
                    }, 0);
                    return numberArticles;
                },
                totalPriceCart(){
                    const totalPrice = this.carts.reduce((acc, curr) => {
                        return acc + curr.totalPriceProduct;
                    }, 0);
                    console.log(totalPrice)
                    return totalPrice;
                }    
            }
        })



    </script>
</body>


</html>